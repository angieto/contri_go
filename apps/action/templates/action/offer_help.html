    <!DOCTYPE html>
    <html>
    <head>
        <title>Geolocation</title>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <style>
        /* Always set the map height explicitly to define the size of the div
        * element that contains the map. */
        #map {
            height: 93.5%;
            width: 60%;
            height: 60%;
            z-index: 0;
            display: inline-block;
        }
        /* Optional: Makes the sample page fill the window. */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        .navbar .nav-item{
            z-index: 2;
        }
        .container{
            width: 40%;
            display: inline-block;
            float: right;
        }
        </style>
    </head>
    <body>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">ContriGo</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
            <li class="nav-item">
                <a class="nav-link " href="">Profile</a>
            </li>
            <li class="nav-item">
                <a class="nav-link btn" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
                Request Help
                </a>
                <div class="collapse" id="collapseExample">
                <div class="card card-body">
                    Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident.
                </div>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">See Your Stats!</a>
            </li>
            </ul>
            <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="">Search Locations</button>
            </form>
        </div>
        </nav>
        <div id="map"></div>
        <div class="container">
        <div class="form">
        <form id="location-form">
            <div class="form-row">
            <div class="form-group col-md-12">
                <label>Title</label>
                <input type="text" class="form-control" placeholder="Title">
            </div>
            <div class="form-group col-md-12">
                <label for="inputPassword4">Description</label>
                <textarea class="form-control" placeholder="Description"></textarea>
            </div>
            </div>
            <div class="form-group">
            <label>Location</label>
            <input type="text" class="form-control" id="location-input" placeholder="1234 Main St">
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
        </div>
        </div>
        <div class="container">
        <div id="formatted-address"></div>
        <div id="address-components"></div>
        <div id="geometry"></div>
        </div>
        <script>
        // Note: This example requires that you consent to location sharing when
        // prompted by your browser. If you see the error "The Geolocation service
        // failed.", it means you probably did not give permission for the browser to
        // locate you.
        var map, infoWindow, options;
        function initMap() 
        {
            options = 
            {
            center: {lat: 38.5816, lng: -122.0000},
            zoom: 6,
            styles: [
            {
                "elementType": "geometry",
                "stylers": [
                {
                    "color": "#ebe3cd"
                }
                ]
            },
            {
                "elementType": "labels.text.fill",
                "stylers": [
                {
                    "color": "#523735"
                }
                ]
            },
            {
                "elementType": "labels.text.stroke",
                "stylers": [
                {
                    "color": "#f5f1e6"
                }
                ]
            },
            {
                "featureType": "administrative",
                "elementType": "geometry.stroke",
                "stylers": [
                {
                    "color": "#c9b2a6"
                }
                ]
            },
            {
                "featureType": "administrative.land_parcel",
                "elementType": "geometry.stroke",
                "stylers": [
                {
                    "color": "#dcd2be"
                }
                ]
            },
            {
                "featureType": "administrative.land_parcel",
                "elementType": "labels.text.fill",
                "stylers": [
                {
                    "color": "#ae9e90"
                }
                ]
            },
            {
                "featureType": "landscape.natural",
                "elementType": "geometry",
                "stylers": [
                {
                    "color": "#dfd2ae"
                }
                ]
            },
            {
                "featureType": "poi",
                "elementType": "geometry",
                "stylers": [
                {
                    "color": "#dfd2ae"
                }
                ]
            },
            {
                "featureType": "poi",
                "elementType": "labels.text.fill",
                "stylers": [
                {
                    "color": "#93817c"
                }
                ]
            },
            {
                "featureType": "poi.park",
                "elementType": "geometry.fill",
                "stylers": [
                {
                    "color": "#a5b076"
                }
                ]
            },
            {
                "featureType": "poi.park",
                "elementType": "labels.text.fill",
                "stylers": [
                {
                    "color": "#447530"
                }
                ]
            },
            {
                "featureType": "road",
                "elementType": "geometry",
                "stylers": [
                {
                    "color": "#f5f1e6"
                }
                ]
            },
            {
                "featureType": "road.arterial",
                "elementType": "geometry",
                "stylers": [
                {
                    "color": "#fdfcf8"
                }
                ]
            },
            {
                "featureType": "road.highway",
                "elementType": "geometry",
                "stylers": [
                {
                    "color": "#f8c967"
                }
                ]
            },
            {
                "featureType": "road.highway",
                "elementType": "geometry.stroke",
                "stylers": [
                {
                    "color": "#e9bc62"
                }
                ]
            },
            {
                "featureType": "road.highway.controlled_access",
                "elementType": "geometry",
                "stylers": [
                {
                    "color": "#e98d58"
                }
                ]
            },
            {
                "featureType": "road.highway.controlled_access",
                "elementType": "geometry.stroke",
                "stylers": [
                {
                    "color": "#db8555"
                }
                ]
            },
            {
                "featureType": "road.local",
                "elementType": "labels.text.fill",
                "stylers": [
                {
                    "color": "#806b63"
                }
                ]
            },
            {
                "featureType": "transit.line",
                "elementType": "geometry",
                "stylers": [
                {
                    "color": "#dfd2ae"
                }
                ]
            },
            {
                "featureType": "transit.line",
                "elementType": "labels.text.fill",
                "stylers": [
                {
                    "color": "#8f7d77"
                }
                ]
            },
            {
                "featureType": "transit.line",
                "elementType": "labels.text.stroke",
                "stylers": [
                {
                    "color": "#ebe3cd"
                }
                ]
            },
            {
                "featureType": "transit.station",
                "elementType": "geometry",
                "stylers": [
                {
                    "color": "#dfd2ae"
                }
                ]
            },
            {
                "featureType": "water",
                "elementType": "geometry.fill",
                "stylers": [
                {
                    "color": "#b9d3c2"
                }
                ]
            },
            {
                "featureType": "water",
                "elementType": "labels.text.fill",
                "stylers": [
                {
                    "color": "#92998d"
                }
                ]
            }
            ]

            }
            // New map
            map = new google.maps.Map(document.getElementById('map'), options);
            infoWindow = new google.maps.InfoWindow;

            //Listen for click on the map
            google.maps.event.addListener(map, 'onhover', function(event){
            //Add marker
            addMarker({coords:event.latLng, animation: google.maps.Animation.DROP});


            });

            // Try HTML5 geolocation.
            if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                var pos = {
                lat: position.coords.latitude,
                lng: position.coords.longitude
                };

                infoWindow.setPosition(pos);
                infoWindow.setContent('Location found.');
                infoWindow.open(map);
                map.setCenter(pos);
            }, function() {
                handleLocationError(true, infoWindow, map.getCenter());
            });
            } else {
            // Browser doesn't support Geolocation
            handleLocationError(false, infoWindow, map.getCenter());
            }

            var contentString = '<div id="content">'+
                '<div id="siteNotice">'+
                '</div>'+
                '<div class="form-group">'+
                '<input type:"text" name="title">'+
                '<textarea name="desc"></textarea>' +
                '<input type:"date" name="datefrom">'+
                '<input type:"date" name="dateto">'+
                '<input type:"time" name="time">'+
                '<button type:"submit" name="submit">Create</button>'+
                '</div>'+
                '</div>';

            var markers = [

            { 
                coords:{lat: 38.5761, lng: -121.4934},
                iconImage: "https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png",
                content: contentString
            },
            {
                coords:{lat: 38.7907, lng: -121.2358},
                content: "Rocklin, CA"
            }
            ]

            for (var i = 0; i < markers.length; i++){
            addMarker(markers[i]);
            }
            
            function addMarker(props)
            {
            console.log("function addMarker");
            var marker = new google.maps.Marker({
                position: props.coords,
                map:map,
                icon: props.iconImage,
                animation: props.animation
            });
            if(props.iconImage)
            {
                marker.setIcon(props.iconImage);
            }
            console.log(infoWindow)
            if(props.content)
            {
                var infoWindow = new google.maps.InfoWindow({
                content: props.content
                });
                console.log("new Info")
                marker.addListener('click', function(){
                infoWindow.open(map, marker);
                });
            }
            }
        }

        function handleLocationError(browserHasGeolocation, infoWindow, pos) {
            infoWindow.setPosition(pos);
            infoWindow.setContent(browserHasGeolocation ?
                                'Error: The Geolocation service failed.' :
                                'Error: Your browser doesn\'t support geolocation.');
            infoWindow.open(map);
        }
        </script>
        <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAIIzDzc1Tm1RUirTx-Wt8qWhwOf0Z91_0&callback=initMap">
        </script>

        <script>
        //call GeoCode
        /* geocode();*/

        //get location form
        var locationForm = document.getElementById('location-form');
        
        //listen for submit

        locationForm.addEventListener('submit', geocode);

        function geocode(e){

            e.preventDefault();

            var location = "Sacramento, CA";
            console.log(location)

            axios.get('https://maps.googleapis.com/maps/api/geocode/json', {
            params: {
                address: location,
                key:'AIzaSyAIIzDzc1Tm1RUirTx-Wt8qWhwOf0Z91_0'
            }
            })
            .then(function(response){

            var formattedAddress = response.data.results[0].formatted_address;
            console.log(formattedAddress)
            var formattedAddressOutput = `
                <ul class="list-group">
                <li class="list-group-item">${formattedAddress}</li>
                </ul>
            `;
            

            /*  var addressComponents = response.data.results[0].address_components;
            var addressComponentsOutput = '<ul class="list-group">';
            for(var i=0; i < addressComponents.length;i++){

                addressComponents += `
                <li 
                class="list-group-item">${addressComponents[i].types[0]} ${addressComponents[i].long_name}</li>


                `;
            }*/
            /*addressComponentsOutput += '</ul>';*/
            //Geometry
            var lat = response.data.results[0].geometry.location.lat;
            console.log("lat")
            var lng = response.data.results[0].geometry.location.lng;
            console.log("lng")
            var geometryOutput = `
                <ul class="list-group">
                <li class="list-group-item">${lat}</li>
                <li class="list-group-item">${lng}</li>
                </ul>
            `;










            document.getElementById('formatted-address').innerHTML = formattedAddressOutput;
            /*document.getElementById('address-components').innerHTML = addressComponentsOutput;*/
            document.getElementById('geometry').innerHTML = geometryOutput;
            console.log(formattedAddressOutput);
            console.log(addressComponentsOutput);
            console.log(geometryOutput);
            })

            .catch(function(error){
            console.log(error);
            });

        }
        </script>
    </body>
    </html>